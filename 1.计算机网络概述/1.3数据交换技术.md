# 1.3 数据交换技术

### 1.3.1 数据交换的概念

> ​		为了连接更大范围、更多数量的主机，可以将许多交换设备互连，构成一个数据中继与转发的“中间网络”，然后再将主机连接到距离较近的交换设备上，主机之间的数据传输通过“中间网络”实现中继与转发。这个中间网络不需要关心所传输数据的内容，而只是为这些数据从一个结点到另一个结点直至到达目的结点提供数据中继与交换的功能，称之为数据交换网络，组成交换网络的结点（即交换设备）称为交换结点，交换结点和传输介质的集合称为通信子网，即网络核心。

### 1.3.2 数据交换技术

		常见的数据交换技术包括**电路交换、报文交换和分组交换**。

##### 电路交换

		在电路交换网络中，首先需要通过中间交换结点为两台主机之间建立一条专用的通道线路，称为电路，然后再利用该电路进行通信，通信结束后再拆除电路。利用电路交换进行通信包括建立电路、传输数据和拆除电路三个阶段。

##### 报文交换

		报文交换也称为消息交换，其工作过程为：发送方把要发送的信息附加上发送/接收主机的地址及其他控制信息，构成一个完整的报文，然后**以报文为单位在交换网络的各结点之间以存储--转发的方式传送**，直至送达目的主机。

##### 分组交换

* 分组交换基本原理

	分组交换需要将待传输数据（即报文）**分割成较小的数据块**，每个数据块附加上地址、序号等控制信息**构成数据分组**，每个分组独立传输到目的地，目的地将收到的分组重新组装，还原为报文。**分组传输过程通常采用存储--转发交换方式**。

* 分组长度的确定

  * 分组长度与延时时间
  
  * 分组长度与误码率
  
    > 通信链路的信道误码率是确定分组长度时另一个需要重点考虑的因素。设分组长度为L位，其中h位为分组头长度，数据长度为x位，即有
    >
    > <center>x+h=L</center>
    >
    > 若信道误码率为P<sub>e</sub> ，则分组传输正确的概率（只考虑分组中位误码的情况）为
    >
    > <center>P<sub>s</sub>=(1-P<sub>e</sub>)<sup>x+h</sup>  </center>
    >
    > 分组传输错误要求重发的概率为(1-P<sub>s</sub>)，在考虑到可能多次连接传输错误的情况下，可以得到的最佳分组长度L<sub>opt</sub>为
    >
    > <center>L<sub>opt</sub>=\sqrt{$\frac{h}{P<sub>e</sub>}}</center>
    >
    > 最高信道利用率可以表示为
    >
    > <center>n<sub>max</sub>=(1-\sqrt{hP<sub>e</sub>})<sup>2</sup></center>

##### 优缺点对比

|          | 优点                                                         | 缺点                                                 |
| -------- | ------------------------------------------------------------ | ---------------------------------------------------- |
| 电路交换 | **实时性高**，时延和时延抖动较小                             | 对于突发性数据传输，**信道利用率低**，且传输速率单一 |
| 报文交换 | ①不需要建立连接；<br/>②只有当报文被转发时才占用相应的信道；<br/> | 交换结点需要缓冲存储，报文需要排队，增加了延时       |
| 分组交换 | ①交换设备存储容量要求低；<br/>②交换速度快;<br/>③可靠传输效率高;<br/>④更加公平 | -------------                                        |



### 1.3.3 计算机网络的主要性能指标

|            |                                                              |      |
| ---------- | ------------------------------------------------------------ | ---- |
| 速率与带宽 | 速率是指网络单位时间内传送的数据量，用以描述网络传输数据的快慢，也称为数据传输速率或数据速率。<br/>        计算机网络传输的数据是**以位为信息单位**的**二进制数据**，速率的基本单位是bit/s（位每秒），也称速率为比特率。同时也会用“带宽”描述速率。<br/>        在通信或信号处理领域中，带宽原本是指信号具有的频带宽度，即信号成分的最高频率与最低频率之差，单位为Hz（赫兹）。<br/>        在计算机网络中，当描述一条链路或信道的数据传输能力时，经常使用“带宽”一词表示链路或信道的最高数据速率，单位也是bit/s。 |      |
| 时延       | 时延是指数据从网络中的一个结点（主机或交换设备等）到达另一结点所需要的时间。分组的每跳传输过程主要产生四类时间延迟：<br/>1. 结点处理时延<br/>            分组到达交换结点时，交换设备需要验证分组是否有差错，根据分组携带的信息检索转发表，确定如何转发该分组，还可能修改分组的部分控制信息等。**针对分组进行这些操作的时间总和为结点处理时延，记为d<sub>c</sub> **。通常很小，常被忽略。<br/>2. 排队时延<br/>            当分组到达交换结点，经过处理并明确需要从哪个输出链路进行转发后，分组需要在交换结点内**被交换到输出链路，等待从输出链路发送到下一个交换结点（或目的主机）**。此时，在该分组之前可能**有其他分组正在或等待交换到相同的输出链路**，或者**交换到输出链路后在该分组之前有其他分组在等待通过输出链路进行发送**。以上均需分组在交换结点暂时缓存（存储---转发），排队等待输出链路可用，**分组在缓存中排队等待的时间即排队时延，记为d<sub>q</sub> **。<br/>3. 传输时延<br/>            分组在输出链路发送时，**从发送第一位开始，到发送完最后一位为止**，所用的时间称为传输时延，也称发送时延，记为d<sub>t</sub> 。假设分组长度为Lbit，链路带宽（即速率）为Rbit/s，即分组的传输时延为<br/><center>d<sub>t</sub>=L/R</center><br/>4. 传播时延<br/>            信号从**发送端发送出去，经过一定距离的物理链路到达接收端所需的时间**，称为传播时延，记为d<sub>p</sub> 。若物理链路长度为D(m)，信号传播速度为V(m/s)，则传播时延为<br/><center>d<sub>p</sub>=D/V</center> |      |
| 时延带宽积 | 一段物理链路的传播时延与链路带宽的乘积，称为时延带宽积，记为G<br/><center>G=d<sub>p</sub> * R</center> |      |
| 丢包率     | 用于评价和衡量网络性能的指标，很大程度可反映网络的拥塞程度，因引发网络丢包的主要因素是网络拥塞。丢包率可定义为<br>η=N<sub>1</sub> / N<sub>s</sub> = (N<sub>s</sub>-N<sub>r</sub>)/ N<sub>s</sub> |      |
| 吞吐量     | 单位时间内源主机通过网络向目的主机实际送达的数据量，单位为bit/s 或 B/S （字节每秒），记为Thr。吞吐量经常用于度量网络的实际数据传送（通过）能力，即网络实际可以达到的源主机到目的主机的数据传送速率。 |      |

